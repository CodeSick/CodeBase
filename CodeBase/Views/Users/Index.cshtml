@model IEnumerable<CodeBase.Models.User>
@{
    ViewBag.Title = "Users";
}
<h1 class="border">Users</h1>
<table>
    <tr>
        <th>Username </th>
        <th>Gravatar </th>
        <th>JoinDate </th>
        <th>Articles </th>
        <th>Ratings </th>
        <th>Comments </th>
        <th>Answers </th>
        <th>Questions </th>
        <th>Roles</th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @(Html.ActionLink<UsersController>(x=>x.Details(item.UserId), item.Username))
            </td>
            <td>
                @item.Gravatar
            </td>
            <td>
                @String.Format("{0:d/M/yyyy}", item.JoinDate)
            </td>
            <td>
                @(item.Articles == null ? "None" : item.Articles.Count.ToString())
            </td>
            <td>
                @(item.Ratings == null ? "None" : item.Ratings.Count.ToString())
            </td>
            <td>
                @(item.Comments == null ? "None" : item.Comments.Count.ToString())
            </td>
            <td>
                @(item.Answers == null ? "None" : item.Answers.Count.ToString())
            </td>
            <td>
                @(item.Questions == null ? "None" : item.Questions.Count.ToString())
            </td>
            <td>
                @Roles.GetRolesForUser(item.Username)[0]
            </td>
        </tr>
    }
</table>
